parameters:
  - name: pythonVersion
    type: string
    default: '3.9'

steps:
  - task: UsePythonVersion@0
    displayName: 'Use Python ${{ parameters.pythonVersion }}'
    inputs:
      versionSpec: '${{ parameters.pythonVersion }}'
      addToPath: true
      architecture: 'x64'

  - script: |
      python3 -m venv antenv
      source antenv/bin/activate
      pip install --upgrade pip wheel setuptools
      # pip install setup
      pip install -r requirements.txt
    workingDirectory: $(projectRoot)
    displayName: 'Install Requirements'

  - ${{ if or( eq(variables.isStable, 'True'), eq(variables.isMain, 'True') ) }}:
      - task: PublishPipelineArtifact@1
        inputs:
          targetPath: $(projectRoot)
          artifactName: WebApp
